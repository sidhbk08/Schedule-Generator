<!DOCTYPE html>
<html>
<head>
    <title>Schedule Result</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="wrapper">
        <div class="content">
            <h2>Generated Schedule</h2>
            <table>
                <tr>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th class="no-select">Type</th>
                </tr>
                {% for item in schedule %}
                <tr>
                    <td>{{ item.start }}</td>
                    <td>{{ item.end }}</td>
                    <td class="no-select">{{ item.label }}</td>
                </tr>
                {% endfor %}
            </table>
            <br><a href="/">‚Üê Generate Another</a>
        </div>
        <footer>
            Made by Siddharth
        </footer>
    </div>

    <script>
    document.addEventListener('copy', function (e) {
        const table = document.querySelector('table');
        if (!table) return;

        const tempTable = table.cloneNode(true);
        tempTable.querySelectorAll('.no-select').forEach(cell => {
            cell.textContent = '';
        });

        const tempDiv = document.createElement('div');
        tempDiv.style.position = 'absolute';
        tempDiv.style.left = '-9999px';
        tempDiv.appendChild(tempTable);
        document.body.appendChild(tempDiv);

        const range = document.createRange();
        range.selectNode(tempDiv);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        try {
            document.execCommand('copy');
            e.preventDefault();
        } catch (err) {
            console.error('Copy blocked', err);
        }

        document.body.removeChild(tempDiv);
        selection.removeAllRanges();
    });
    </script>
</body>
</html>
